# Political Productivity Hub – MVP PRD (모듈 1: Messaging & Contact Core)

## 1. 요약
현역 국회의원·예비후보 캠프가 선거 기간에 100K+ 유권자에게 SMS·카카오 메시지를 정확‧신속하게 발송하고 성과를 분석할 수 있도록, ‘연락처 통합‧중복 제거’와 ‘다채널 대량 발송’ 기능을 한곳에 제공하는 웹 기반 허브를 1차로 출시한다.

## 2. 목표 & 성공 지표
1. **정확성** – 잘못 발송(오발송·중복) 사고 0.1%↓  
2. **도달률** – 95% 이상 성공 전송(Push)  
3. **발송 속도** – 10K 메시지 ≤ 20 분(50 msg/s)  
4. **활용률** – 릴리스 1개월 내 3개 이상 캠프가 일일 1,000건 이상 발송  

## 3. 핵심 사용자
• 현역 국회의원·예비후보 캠프의 홍보·조직 담당자(5~20명 규모 팀)  

## 4. 주요 사용 시나리오
1. 선거 D-30, 캠프 스태프가 업데이트된 유권자 명단을 CSV로 업로드한다.  
2. 시스템이 번호·이메일·카카오 ID 중복을 감지·병합한다.  
3. 스태프가 ‘D-30 안내’ 캠페인을 작성, SMS → 카카오 순 우선순위를 설정한다.  
4. 발송 후 실시간으로 성공/실패/열람률을 모니터링하고 클릭이 낮은 콘텐츠를 교체한다.  

## 5. 기능 범위 (MVP 1 단계)
### 5.1 연락처 허브
- CSV/Excel 업로드(100K 레코드)  
- 중복 매칭(전화·이메일·카카오 ID) & 자동 병합  
- 태그·필터·검색(<150 ms p95)  
- 커뮤니케이션 이력 타임라인

### 5.2 다채널 메시징 허브
- 통합 인박스(SMS·카카오)  
- 캠페인 발송 마법사(템플릿·퍼스널라이즈)  
- 채널 우선순위·폴백(SMS → 카카오)  
- 발송 큐 & 모니터링(실시간)  

### 5.3 성과 분석 & 쿼터 관리
- 발송 수·성공률·열람률 대시보드  
- 월간 쿼터(발송 건수) 현황 & 하드 스톱  

### 5.4 관리 & 보안
- 테넌트별 RLS, 역할(Owner/Admin/Staff)  
- PII 컬럼 암호화(pgcrypto)  
- 모든 데이터 한국 리전 보관  

## 6. 비-범위(차후 모듈)
- 연설·문서 아카이브  
- 일정·캘린더 통합  
- RN 전화 에이전트  
- SNS (페북·텔레그램·이메일) 확장

## 7. 기술 스택 (EasyNext 기본)
Frontend: Next.js 15, Typescript, shadcn/ui, TailwindCSS, @tanstack/react-query  
Backend: .NET 9 Minimal API, EF Core, MediatR  
DB: PostgreSQL 16 (RLS)  
Infra: Docker Compose on bare-metal(Ubuntu 24.04), Redis Streams, OAuth 2.0 Auth (e.g., Auth0, custom provider)  

## 8. 프로젝트 로드맵
| 단계 | 기간 | 주요 산출물 |
|------|------|-------------|
|1. 스캐폴딩|W1|Repo, CI/CD, 테넌트 모델, Auth|
|2. 연락처 허브|W2-W4|업로드, 중복 제거, 검색 UI|
|3. 메시징 엔진|W4-W6|SMS·카카오 API 연동, 발송 큐|
|4. 대시보드 & 쿼터|W6-W7|실시간 통계, 하드 스톱 로직|
|5. 베타 운영|W8|3개 캠프 온보딩, 피드백 수집|

## 9. 리스크 & 대응
1. **카카오 비즈니스 인증 지연** → 사전 서류 준비, 대체 SMS만 우선 오픈  
2. **100K 업로드 성능** → COPY 프로토콜 + 로우 파티셔닝  
3. **Bare-metal 장애** → 이중 백업 디스크 & Prometheus 모니터링  

## 10. 수용 기준 (Acceptance)
- 100K CSV 업로드 ≤ 10 분  
- 중복 제거 정확도 ≥ 95%  
- 10K SMS 발송 성공률 ≥ 95% / 20 분 이내  
- 실시간 대시보드 지연 ≤ 5 초